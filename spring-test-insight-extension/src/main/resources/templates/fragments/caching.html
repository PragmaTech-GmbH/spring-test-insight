<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <div th:fragment="caching-section(cacheStats)" class="cache-stats">
        <h2>Spring Context Caching Statistics</h2>
        <div th:if="${cacheStats != null}">
            <div class="cache-metric">
                <span class="label">Cache Size:</span>
                <span class="value" th:text="${cacheStats.getSize() + ' / ' + cacheStats.getMaxSize()}">0 / 32</span>
            </div>
            <div class="cache-metric">
                <span class="label">Max Cache Size:</span>
                <span class="value" th:text="${cacheStats.getMaxSize()}">32</span>
            </div>
            <div class="cache-metric">
                <span class="label">Cache Hits:</span>
                <span class="value" th:text="${cacheStats.getHitCount()}">0</span>
            </div>
            <div class="cache-metric">
                <span class="label">Cache Misses:</span>
                <span class="value" th:text="${cacheStats.getMissCount()}">0</span>
            </div>
            <div class="cache-metric">
                <span class="label">Cache Hit Rate:</span>
                <span class="value hit-rate" th:text="${#numbers.formatDecimal(cacheStats.getHitRatio() * 100, 1, 1) + '%'}">0.0%</span>
            </div>
            <div class="cache-metric" th:if="${not #lists.isEmpty(cacheStats.getContextKeys())}">
                <span class="label">Cached Context Keys:</span>
                <div class="context-keys">
                    <div th:each="contextKey : ${cacheStats.getContextKeys()}" class="context-key" th:text="${contextKey}">Context Key</div>
                </div>
            </div>
        </div>
        <div th:if="${cacheStats == null}" class="cache-unavailable">
            <p>Cache statistics are not available. This may occur when Spring's DefaultContextCache is not accessible via reflection.</p>
        </div>
    </div>
</body>
</html>